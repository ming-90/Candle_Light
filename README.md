# 교통 약자를 위한 네비게이션 Candle Light
## 샘플 영상

https://github.com/user-attachments/assets/cc088e35-9854-40ec-b60d-46c94586269e

## 서론
앞이 보이지 않는 시각 장애인들은 새로운 장소를 목표로 외출을 하게 되면 비장애인과는 다르게 많은 어려움을 겪게 됩니다.
점자 블럭의 미흡한 관리와 교통 수단을 알려줄수 있는 장치의 부족함이 시각 장애인들의 어려움의 주된 원인입니다.
기존의 서비스는 대부분 비장애인들을 위한 서비스이며 내가 가야할 위치와 방향 전환 등은 알 수 있지만 현실과 인터렉션을 통한 현실 정보를 받을 수 없다는 것이 문제점 입니다.
저는 이 프로젝트를 통해 Gemini 의 STT, OCR 성능을 이용하여 이러한 불편함을 해소가 목표입니다.

현재 구현 된 서비스는 Gemini 의 STT, OCR 을 이용해 목표하는 바를 구현 가능한지 알아보려고 합니다.
실제 시각 장애인이 쓸 TTS(음성안내), UI 등은 고려하지 않았음을 주의해주세요.

## 다른 서비스
### Naver map
Naver map 에는 음성을 통한 장소 검색 기능은 구현이 되어있습니다.
하지만 해당 장소를 목적지로 선택하고 네비게이션을 실행 하려면 도착지 설정 '버튼'을 클릭 해야 합니다.
또한 내가 타야할 교통 수단의 정보는 제공하지만 현실 세계의 버스가 내가 타야할 버스인지는 눈으로 보고 판단 해야 합니다.

### Kakao map
Kakao map 에는 음성만으로 장소 검색과 도착지 설정, 네비게이션 실행까지 수행 가능합니다.
하지만 '자동차' 네비게이션만 가능하며 '걷기 + 대중교통'은 음성만으로 실행할 수 없습니다.
또한 Naver map 과 마찬가지로 내가 타야할 버스는 눈으로 보고 판단 해야 합니다.

## Candle Light
'Candle Light' 는 시각 장애인을 위한 서비스 입니다. 따라서 네비게이션은 '걷기 + 대중교통' 모드만 제공 합니다.
음성을 이용하여 출발지, 도착지를 검색 합니다. 음성이 입력이 되면 데이터베이스에서 원하는 정보를 쉽게 검색 할 수 있게 Gemini 가 음성을 Text 로 변환 합니다.
변환된 Text 통한 장소 검색이 완료가 되면 걷기, 버스, 지하철 을 이용하여 도착지 까지 이동 할 수 있는 경로 탐색을 하며 바로 안내 보드로 변경이 됩니다.
걷기 모드에서는 다음 목적지(버스, 지하철, 도착지) 까지의 거리를 확인 하며 다음 목적지에 도착을 하면 목적지에 대한 프로세스를 시작 합니다.
버스 모드는 사진 업로드 기능이 있으며 이것은 버스 사진을 업로드 용도 입니다. 이 기능은 버스 정류장에서 버스가 왔다는 것은 알 수 있지만 너무 많은 버스가 동시에 도착 할 경우 내가 타야 할 버스가 무엇인지 알 수 없습니다. 이럴 때 핸드폰으로 버스 사진을 찍고 Gemini 가 사진 속 버스를 인식, 버스의 번호를 반환 합니다. 이 버스 번호를 받게 되면 내가 타야 할 버스 번호와 비교를 하고 맞다면 타야 할 버스라고 알려줍니다.

## Setup
### Install
```bash
make env
conda activate candle_light
make setup
```
### env file
```bash
NAVER_ID
NAVER_SECRET    # 주소를 이용한 위도/경도 반환 API 사용
SK_SECRET       # 걷기 + 대중교통 네비게이션 경로 탐색 API 사용
GOOGLE_SECRET   # Google Gemini 사용
```
총 4개 회사의 API 키 필요

## 사용법
현재 해당 서비스는 Gemini 를 이용하여 목표한 기능 구현을 테스트 하기 위해 시각 장애인을 위한 UI 가 고려되지 않았습니다.
따라서 버튼 클릭, Text 안내가 나오게 되며 이것은 추후 변경 할 예정입니다.

1. 출발지 음성 검색 (STT with Gemini)
'마이크 켜기' 버튼을 클릭 하여 출발지를 입력합니다. 현재는 정확한 주소지를 입력해야 합니다.
'서울경찰청' 버튼을 클릭 하면 미리 저장된 음성 파일을 Gemini API 에 입력 합니다.
Gemini 의 출력은 잠시 뒤 아래에 출력 됩니다.

2. 도착지 음성 검색 (STT with Gemini)
'마이크 켜기' 버튼을 클릭 하여 출발지를 입력합니다. 현재는 정확한 주소지를 입력해야 합니다.
'숭례문' 버튼을 클릭 하면 미리 저장된 음성 파일을 Gemini API 에 입력 합니다.
Gemini 의 출력은 잠시 뒤 아래에 출력 됩니다.

3. 네비게이션 길 찾기
지도가 출력이 되며 출발지(파란색), 버스(초록색), 도착지(빨간색) 마커로 표시가 되며 내 위치(빨간색 바탕에 흰색 원) 또한 지도에 표시가 됩니다.
(* 내 위치는 데모 구동을 위해서 1번과 2번을 통한 길찾기 API 를 통해 받아온 경로를 이용 하였습니다.)
'걷기' 버튼을 클릭 하면 다음 목적지를 향해 이동 합니다. 지도의 하단에 다음 목적지까지의 거리를 표시합니다.

4. 버스 번호 확인 (OCR with Gemini)
버스 정류장에 도착하게 되면 버스를 카메라로 찍어 업로드 합니다. 버스 번호가 보이는 사진을 업로드 하게 되면 해당 사진을 Gemini API 에 입력을 하고 Gemini 는 출력으로 버스의 번호만 반환 합니다.
반환한 버스 번호와 경로를 확인 후 내가 타야할 번호가 일치 하면 버스를 탑승 하라는 메세지가 출력 됩니다.
(* 버스의 이동 또한 '3. 네비게이션 길 찾기' 아래의 '걷기' 버튼을 클릭 하세요! 지도가 표시됩니다.)
지도 아래 현재 위치와 버스 하차장까지의 거리를 표시합니다.
도착지점에 가까워지면 다음 프로세스로 진행 합니다.

5. 네비게이션 길 찾기
버스에서 하차 후 다시 걷기 모드가 활성화 되며 3번과 동일 하게 다음 목적지까지의 거리가 표시 됩니다.
(* 이동은 '걷기' 버튼을 이용해주세요.)

6. 도착지
도착지에 도착하면 안내와 함께 프로그램이 종료 됩니다.

## 추후 개발 방향
1. 시각 장애인을 위한 UX/UI 개발
2. 걷기 모드에서 방향 알림
3. 핸드폰 어플에서 동작 가능하게 개발
4. 여러가지 경로 선택 모드 구현
